<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tulip Shop - Performance Collection</title>
    
    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/supply-style.css}">
    <!-- Google Fonts - Condensed Sans-serif for Impact-style typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined|Material+Icons" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <!-- GSAP & ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    
    <!-- Lenis Smooth Scroll -->
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>

    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            prefix: "tw-", // Thêm prefix để tránh xung đột với Bootstrap
            theme: {
                extend: {
                    colors: {
                        primary: "#C8102E",
                        "background-light": "#FFFFFF",
                        "background-dark": "#121212",
                        "surface-light": "#F9F9F9",
                        "surface-dark": "#1E1E1E",
                    },
                    fontFamily: {
                        display: ["'Oswald'", "sans-serif"],
                        body: ["'Inter'", "sans-serif"],
                        script: ["'Great Vibes'", "cursive"],
                    },
                },
            },
            // Quan trọng: Tắt preflight để không làm hỏng style cũ của Supply
            corePlugins: {
                preflight: false,
            }
        };
    </script>

    <!-- Three.js (ES Modules) -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <style>
        .marquee-container { overflow: hidden; white-space: nowrap; }
        .marquee-content { display: inline-block; animation: marquee 20s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        /* Fix xung đột giữa Bootstrap và Tailwind (nếu có) */
        .vertical-content a { text-decoration: none; }
        .vertical-content ul { padding-left: 0; list-style: none; }

        /* [FIX] CSS Patch cho phần Vertical Content */
        .vertical-content img {
            display: block;
            max-width: 100%;
            height: auto;
        }

        .vertical-content h2,
        .vertical-content h3,
        .vertical-content h4 {
            margin-top: 0;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .vertical-content p {
            margin-bottom: 1rem;
        }

        /* Đảm bảo container không bị Bootstrap làm hỏng (nếu chưa xóa Bootstrap) */
        .tw-container {
            width: 100%;
            margin-right: auto;
            margin-left: auto;
            padding-right: 1rem;
            padding-left: 1rem;
        }

        /* Responsive container widths cho Tailwind */
        @media (min-width: 640px) { .tw-container { max-width: 640px; } }
        @media (min-width: 768px) { .tw-container { max-width: 768px; } }
        @media (min-width: 1024px) { .tw-container { max-width: 1024px; } }
        @media (min-width: 1280px) { .tw-container { max-width: 1280px; } }
        @media (min-width: 1536px) { .tw-container { max-width: 1536px; } }

        /* 1. Phạm vi áp dụng: Chỉ tác động vào phần Eva de Eva (.vertical-content), Footer (.site-footer) và Search (.search-overlay) */
        .vertical-content img,
        .site-footer img,
        .search-overlay img {
            display: block;       /* Sửa lỗi ảnh bị dính dòng text */
            vertical-align: middle;
            max-width: 100%;      /* Sửa lỗi ảnh bị tràn khung */

        }

        /* 2. Reset Button & Input: Khôi phục style cơ bản */
        .vertical-content button,
        .vertical-content input,
        .site-footer button,
        .site-footer input,
        .search-overlay button,
        .search-overlay input {
            font-family: inherit; /* Kế thừa font chữ của web */
            font-size: 100%;
            line-height: 1.15;
            margin: 0;
            overflow: visible;
            text-transform: none;
            box-sizing: border-box; /* Quan trọng: Tính toán padding chuẩn */
        }

        /* 3. Style mặc định cho Button (tránh việc nó trông như text thường) */
        .vertical-content button,
        .site-footer button,
        .search-overlay button {
            -webkit-appearance: button; /* Hành vi nút bấm chuẩn */
            cursor: pointer;
            background-color: transparent; /* Để các class Tailwind bg-* hoạt động */
            border-style: solid;  /* Để các class Tailwind border-* hoạt động */
            border-width: 0;      /* Reset border mặc định xấu xí */
        }

        /* 4. Style mặc định cho Input (thêm viền để dễ nhìn) */
        .vertical-content input,
        .site-footer input,
        .search-overlay input {
            border-style: solid;
            border-width: 1px;
        }

        /* 5. Fix lỗi icon FontAwesome/Material bị lệch dòng */
        .vertical-content i, .vertical-content span.material-icons-outlined,
        .site-footer i, .site-footer span.material-icons-outlined,
        .search-overlay i {
            display: inline-block;
            vertical-align: middle;
            line-height: 1;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tw-animate-fade-in-up {
            animation: fadeInUp 0.3s ease-out forwards;
        }

    </style>

</head>
<body>
    <!-- Header Navigation -->
    <header class="main-header">
        <nav class="header-nav">
            <div class="logo">
                <a href="/">TULIP SHOP</a>
            </div>
            <ul class="nav-links">
                <li><a href="/products">Shop</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="header-actions">
                <a href="/cart" class="cart-link">Cart <span class="cart-count">0</span></a>
            </div>
        </nav>
    </header>

    <!-- Main Horizontal Container -->
    <main class="main-content">
        <div id="main-container" class="horizontal-wrapper">
            <!-- Section 1: Hero - Performance Pack Cover -->
            <section class="hero-section" id="hero">
                <div class="hero-container">
                    <!-- Background Grid Pattern -->
                    <div class="grid-pattern"></div>
                    
                    <!-- Layer 1: Back Images (z-index: 5) - Behind Text -->
                    <div class="layer-back">
                        <figure class="hero-image image-back-1">
                            <img src="https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=800&h=1000&fit=crop" alt="Fashion Model 1" loading="lazy">
                        </figure>
                        <figure class="hero-image image-back-2">
                            <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=800&h=1200&fit=crop" alt="Fashion Model 2" loading="lazy">
                        </figure>
                        <figure class="hero-image image-back-3">
                            <img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?w=600&h=800&fit=crop" alt="Fashion Model 3" loading="lazy">
                        </figure>
                    </div>

                    <!-- Layer 2: Text (z-index: 10) - Centered, Overlapping -->
                    <div class="layer-text">
                        <h1 class="hero-title hero-title-1">PERFORMANCE</h1>
                        <h1 class="hero-title hero-title-2">PACK</h1>
                    </div>

                    <!-- Layer 3: Front Images (z-index: 15) - In Front of Text -->
                    <div class="layer-front">
                        <figure class="hero-image image-front-1">
                            <img src="https://images.unsplash.com/photo-1539533018447-63fcce2678e3?w=700&h=900&fit=crop" alt="Fashion Model 4" loading="lazy">
                        </figure>
                        <figure class="hero-image image-front-2">
                            <img src="https://images.unsplash.com/photo-1594633313593-bab3825d0caf?w=700&h=1000&fit=crop" alt="Fashion Model 5" loading="lazy">
                        </figure>
                        <figure class="hero-image image-front-3">
                            <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=600&h=800&fit=crop" alt="Fashion Model 6" loading="lazy">
                        </figure>
                    </div>
                </div>
            </section>

            <!-- Section 2: Product Slides - Split Layout Design -->
            <!-- Product Slide 1: The MVP Crew -->
            <section class="product-slide" data-product="1">
                <!-- Left Column: Showcase -->
                <div class="showcase-col">
                    <div class="bg-grid"></div>
                    <div class="crosshair-line crosshair-horizontal"></div>
                    <div class="crosshair-line crosshair-diagonal"></div>
                    <h2 class="bg-text">SHOPIFY</h2>
                    <div class="product-cutout-wrapper">
                        <div id="canvas-container-1" 
                             class="canvas-container" 
                             data-model-src="/assets/models/ao1.glb"
                             data-model-scale="3.0"
                             data-model-y="-0.5"></div>
                    </div>
                    <div class="product-info-top">
                        <h1 class="product-title">Váy xếp ly không tay</h1>
                        <p class="product-price-top">VND 2.000.000đ</p>
                        <button class="quick-view-btn-showcase">XEM NGAY</button>
                    </div>
                    <div class="shop-all-spinner">
                        <svg class="spinner-svg" viewBox="0 0 100 100">
                            <defs>
                                <path id="circle-path" d="M 50, 50 m -37, 0 a 37,37 0 1,1 74,0 a 37,37 0 1,1 -74,0"></path>
                            </defs>
                            <text class="spinner-text" fill="currentColor" font-family="mono" font-size="10">
                                <textPath href="#circle-path">SHOP ALL • SHOP ALL • SHOP ALL •</textPath>
                            </text>
                        </svg>
                    </div>
                </div>
                <!-- Right Column: Lifestyle -->
                <div class="lifestyle-col">
                    <img src="https://res.cloudinary.com/diawi4gde/image/upload/v1765866465/tulip-fashion/n8bx5adwsesqr7i6647r.jpg?w=700&h=900&fit=crop" alt="Model wearing The MVP Crew" class="model-bg" loading="lazy">
                    <div class="gradient-overlay"></div>
                    <div class="marquee-container">
                        <div class="marquee-text">
                            <span>NGUYEN THANH VINH DEP TRAI</span>
                            <span>FRENCH TERRY COTTON 3D EMBROIDERY</span>
                        </div>
                    </div>
                    <div class="number-badge">
                        <div class="number-border">//</div>
                        <span class="number-text">3</span>
                    </div>
                    <div class="hotspot-lifestyle">
                        <div class="hotspot-dot-lifestyle"></div>
                        <div class="hotspot-pulse"></div>
                    </div>
                    <a href="/product/10" class="glass-card"
                       style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 12px;">

                        <div class="glass-card-thumbnail" style="flex-shrink: 0;">
                            <img src="https://res.cloudinary.com/diawi4gde/image/upload/v1765866827/84437958b_b_06_500_ndzwii.jpg?w=100&h=100&fit=crop"
                                 alt="The MVP Crew thumbnail" loading="lazy"
                                 style="display: block;"> </div>

                        <div class="glass-card-info" style="flex-grow: 1;">
                            <h3 class="glass-card-title">Váy xếp ly không tay</h3>
                            <p class="glass-card-price">VND 2.000.000đ</p>
                        </div>

                        <div class="glass-card-icon">
                            <span>↗</span>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Product Slide 2: Sprint Quarter Zip -->
            <section class="product-slide" data-product="2">
                <div class="showcase-col">
                    <div class="bg-grid"></div>
                    <div class="crosshair-line crosshair-horizontal"></div>
                    <div class="crosshair-line crosshair-diagonal"></div>
                    <h2 class="bg-text">SHOPIFY</h2>
                    <div class="product-cutout-wrapper">
                        <div id="canvas-container-2" 
                             class="canvas-container" 
                             data-model-src="/assets/models/ao1.glb"
                             data-model-scale="2.5"
                             data-model-y="-1.5"></div>
                    </div>
                    <div class="product-info-top">
                        <h1 class="product-title">Sprint Quarter Zip</h1>
                        <p class="product-price-top">$69.00</p>
                        <button class="quick-view-btn-showcase">QUICK VIEW</button>
                    </div>
                    <div class="shop-all-spinner">
                        <svg class="spinner-svg" viewBox="0 0 100 100">
                            <defs>
                                <path id="circle-path-2" d="M 50, 50 m -37, 0 a 37,37 0 1,1 74,0 a 37,37 0 1,1 -74,0"></path>
                            </defs>
                            <text class="spinner-text" fill="currentColor" font-family="mono" font-size="10">
                                <textPath href="#circle-path-2">SHOP ALL • SHOP ALL • SHOP ALL •</textPath>
                            </text>
                        </svg>
                    </div>
                </div>
                <div class="lifestyle-col">
                    <img src="https://images.unsplash.com/photo-1539533018447-63fcce2678e3?w=700&h=900&fit=crop" alt="Model wearing Sprint Quarter Zip" class="model-bg" loading="lazy">
                    <div class="gradient-overlay"></div>
                    <div class="marquee-container">
                        <div class="marquee-text">
                            <span>EMBOSSED METAL ZIPPER 3D RUBBER PATCH</span>
                            <span>EMBOSSED METAL ZIPPER 3D RUBBER PATCH</span>
                        </div>
                    </div>
                    <div class="number-badge">
                        <div class="number-border">//</div>
                        <span class="number-text">3</span>
                    </div>
                    <div class="hotspot-lifestyle">
                        <div class="hotspot-dot-lifestyle"></div>
                        <div class="hotspot-pulse"></div>
                    </div>
                    <div class="glass-card">
                        <div class="glass-card-thumbnail">
                            <img src="https://images.unsplash.com/photo-1551028719-00167b16eac5?w=100&h=100&fit=crop" alt="Sprint Quarter Zip thumbnail" loading="lazy">
                        </div>
                        <div class="glass-card-info">
                            <h3 class="glass-card-title">Sprint Quarter Zip</h3>
                            <p class="glass-card-price">USD $69.00</p>
                        </div>
                        <div class="glass-card-icon">
                            <span>↗</span>
                        </div>
                    </div>
                </div>
            </section>
            <section class="footer-slide">
                <div class="footer-visuals">
                    <div class="visual-left">
                        <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=1000&auto=format&fit=crop" alt="Abstract dark" class="visual-img grayscale">
                        <div class="spinner-container">
                            <svg class="spinner-svg" viewBox="0 0 100 100">
                                <path d="M 50, 50 m -37, 0 a 37,37 0 1,1 74,0 a 37,37 0 1,1 -74,0" fill="transparent" id="footerCircle"></path>
                                <text fill="currentColor">
                                    <textPath href="#footerCircle">SHOP ALL • SHOP ALL • SHOP ALL •</textPath>
                                </text>
                            </svg>
                            <span class="material-icons arrow-icon">arrow_outward</span>
                        </div>
                    </div>
                    <div class="visual-right group">
                        <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?q=80&w=1000&auto=format&fit=crop" alt="Models" class="visual-img">
                        <div class="product-card-floating">
                            <div class="card-thumb">
                                <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=200&auto=format&fit=crop" alt="Tee">
                            </div>
                            <div class="card-info">
                                <h3>Commerce Champion Tee</h3>
                                <p>USD $34.00</p>
                            </div>
                            <span class="material-icons card-arrow">arrow_forward</span>
                        </div>
                    </div>
                </div>

                <div class="footer-strip">
                    <div class="strip-pattern"></div>
                    <div class="strip-text">Performance Pack</div>
                    <div class="strip-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>

                <div class="footer-info">
                    <div class="info-content">
                        <p class="info-text">
                            Join the <span class="highlight">Supply</span> commerce community. Our store runs on <a href="#" class="link-highlight">Hydrogen</a>, Tulip's React-based headless commerce stack, deployed on <a href="#" class="link-highlight">Oxygen</a>.
                        </p>
                        <div class="info-social-cta">
                            <h4>Give Supply a shout out on social</h4>
                            <a href="#" class="social-link-cta">
                                Tag us @Tulip when you share
                                <span class="material-icons">arrow_forward</span>
                            </a>
                        </div>
                    </div>

                    <div class="social-grid">
                        <a href="#" class="social-item">
                            <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg>
                        </a>
                        <a href="#" class="social-item">
                            <svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg>
                        </a>
                        <a href="#" class="social-item">
                            <svg viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg>
                        </a>
                        <a href="#" class="social-item">
                            <span class="material-icons">link</span>
                        </a>
                    </div>

                    <div class="footer-links-grid">
                        <a href="#">FAQs</a>
                        <a href="#">Shipping and returns</a>
                        <a href="#">Terms of service</a>
                        <a href="#">Privacy policy</a>
                    </div>
                </div>
            </section>
        </div>

        <div class="vertical-content tw-relative tw-z-20 tw-bg-white tw-text-gray-800">

            <div class="tw-bg-black tw-text-white tw-text-[10px] tw-py-1">
                <div class="tw-container tw-mx-auto tw-px-4 tw-flex tw-justify-between tw-items-center">
                    <div class="tw-flex tw-gap-4">
                        <span>Hotline mua hàng: <b>18003636</b></span>
                        <span>Hotline CSKH: <b>18001818</b></span>
                        <span>|</span>
                        <a class="tw-hover:underline" href="#">Hệ thống showroom</a>
                    </div>
                </div>
            </div>

            <div class="tw-bg-primary tw-text-white tw-text-xs tw-font-bold tw-py-2 marquee-container">
                <div class="marquee-content">
                    ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY
                </div>
            </div>

            <div class="tw-relative tw-w-full tw-h-[400px] md:tw-h-[500px] tw-bg-gradient-to-r tw-from-[#A60F22] tw-to-[#D81B34] tw-flex tw-flex-col tw-justify-center tw-items-center tw-text-white tw-text-center tw-overflow-hidden tw-group">
                <div class="tw-absolute tw-inset-0 tw-opacity-20 tw-bg-[url('https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80')] tw-bg-cover tw-bg-center tw-mix-blend-overlay"></div>
                <div class="tw-relative tw-z-10">
                    <div class="tw-text-2xl md:tw-text-4xl tw-tracking-[0.2em] tw-font-light tw-mb-2">TULIP</div>
                    <div class="tw-text-5xl md:tw-text-8xl tw-font-bold tw-font-display tw-leading-none">
                        SALE UP TO <span class="tw-text-[1.2em] tw-italic tw-ml-4">36%</span>
                    </div>
                </div>
            </div>

            <div class="tw-bg-primary tw-text-white tw-text-xs tw-font-bold tw-py-2 marquee-container tw-mb-12">
                <div class="marquee-content">
                    ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY &nbsp;&nbsp; ONLINE ONLY
                </div>
            </div>

            <section class="tw-container tw-mx-auto tw-px-4 tw-mb-16">
                <div class="tw-flex tw-justify-between tw-items-center tw-mb-6">
                    <h2 class="tw-text-2xl tw-font-bold tw-font-display">Danh mục nổi bật</h2>
                    <div class="tw-flex tw-gap-2">
                        <button id="btn-cat-prev" class="tw-p-1 tw-rounded-full hover:tw-bg-gray-100 tw-border tw-border-transparent hover:tw-border-gray-200 tw-transition">
                            <span class="material-icons-outlined">west</span>
                        </button>
                        <button id="btn-cat-next" class="tw-p-1 tw-rounded-full hover:tw-bg-gray-100 tw-border tw-border-transparent hover:tw-border-gray-200 tw-transition">
                            <span class="material-icons-outlined">east</span>
                        </button>
                    </div>
                </div>

                <div id="category-slider" class="tw-flex tw-overflow-x-auto tw-pb-4 tw-scroll-smooth tw-snap-x" style="scrollbar-width: none; -ms-overflow-style: none;">

                    <a href="/products?category=dam" class="tw-w-[45%] md:tw-w-[calc(25%-1rem)] tw-flex-shrink-0 tw-mr-4 tw-snap-start tw-group tw-cursor-pointer tw-relative tw-h-[400px] tw-overflow-hidden tw-rounded-lg">
                        <img src="https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=600&fit=crop"
                             class="tw-w-full tw-h-full tw-object-cover tw-transition-transform tw-duration-500 group-hover:tw-scale-105">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/10 group-hover:tw-bg-black/0 tw-transition-colors"></div>
                        <div class="tw-absolute tw-bottom-4 tw-left-4 tw-font-bold tw-text-lg tw-text-white tw-drop-shadow-md">Đầm</div>
                        <div class="tw-absolute tw-bottom-4 tw-right-4 tw-bg-white tw-text-black tw-rounded-full tw-p-2 tw-shadow-lg tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity tw-transform tw-translate-y-2 group-hover:tw-translate-y-0">
                            <span class="material-icons-outlined tw-text-sm">arrow_forward</span>
                        </div>
                    </a>

                    <a href="/products?category=so-mi" class="tw-w-[45%] md:tw-w-[calc(25%-1rem)] tw-flex-shrink-0 tw-mr-4 tw-snap-start tw-group tw-cursor-pointer tw-relative tw-h-[400px] tw-overflow-hidden tw-rounded-lg">
                        <img src="https://images.unsplash.com/photo-1604176354204-9268737828e4?w=600&fit=crop"
                             class="tw-w-full tw-h-full tw-object-cover tw-transition-transform tw-duration-500 group-hover:tw-scale-105">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/10 group-hover:tw-bg-black/0 tw-transition-colors"></div>
                        <div class="tw-absolute tw-bottom-4 tw-left-4 tw-font-bold tw-text-lg tw-text-white tw-drop-shadow-md">Áo sơ mi</div>
                        <div class="tw-absolute tw-bottom-4 tw-right-4 tw-bg-white tw-text-black tw-rounded-full tw-p-2 tw-shadow-lg tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity tw-transform tw-translate-y-2 group-hover:tw-translate-y-0">
                            <span class="material-icons-outlined tw-text-sm">arrow_forward</span>
                        </div>
                    </a>

                    <a href="/products?category=ao-kieu" class="tw-w-[45%] md:tw-w-[calc(25%-1rem)] tw-flex-shrink-0 tw-mr-4 tw-snap-start tw-group tw-cursor-pointer tw-relative tw-h-[400px] tw-overflow-hidden tw-rounded-lg">
                        <img src="https://images.unsplash.com/photo-1564485377539-4af72d1f6a2f?w=600&fit=crop"
                             class="tw-w-full tw-h-full tw-object-cover tw-transition-transform tw-duration-500 group-hover:tw-scale-105">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/10 group-hover:tw-bg-black/0 tw-transition-colors"></div>
                        <div class="tw-absolute tw-bottom-4 tw-left-4 tw-font-bold tw-text-lg tw-text-white tw-drop-shadow-md">Áo kiểu</div>
                        <div class="tw-absolute tw-bottom-4 tw-right-4 tw-bg-white tw-text-black tw-rounded-full tw-p-2 tw-shadow-lg tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity tw-transform tw-translate-y-2 group-hover:tw-translate-y-0">
                            <span class="material-icons-outlined tw-text-sm">arrow_forward</span>
                        </div>
                    </a>

                    <a href="/products?category=quan" class="tw-w-[45%] md:tw-w-[calc(25%-1rem)] tw-flex-shrink-0 tw-mr-4 tw-snap-start tw-group tw-cursor-pointer tw-relative tw-h-[400px] tw-overflow-hidden tw-rounded-lg">
                        <img src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=600&fit=crop"
                             class="tw-w-full tw-h-full tw-object-cover tw-transition-transform tw-duration-500 group-hover:tw-scale-105">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/10 group-hover:tw-bg-black/0 tw-transition-colors"></div>
                        <div class="tw-absolute tw-bottom-4 tw-left-4 tw-font-bold tw-text-lg tw-text-white tw-drop-shadow-md">Quần</div>
                        <div class="tw-absolute tw-bottom-4 tw-right-4 tw-bg-white tw-text-black tw-rounded-full tw-p-2 tw-shadow-lg tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity tw-transform tw-translate-y-2 group-hover:tw-translate-y-0">
                            <span class="material-icons-outlined tw-text-sm">arrow_forward</span>
                        </div>
                    </a>

                    <a href="/products?category=vay-ngan" class="tw-w-[45%] md:tw-w-[calc(25%-1rem)] tw-flex-shrink-0 tw-mr-4 tw-snap-start tw-group tw-cursor-pointer tw-relative tw-h-[400px] tw-overflow-hidden tw-rounded-lg">
                        <img src="https://images.unsplash.com/photo-1529139574466-a302d2053990?w=600&fit=crop"
                             class="tw-w-full tw-h-full tw-object-cover tw-transition-transform tw-duration-500 group-hover:tw-scale-105">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/10 group-hover:tw-bg-black/0 tw-transition-colors"></div>
                        <div class="tw-absolute tw-bottom-4 tw-left-4 tw-font-bold tw-text-lg tw-text-white tw-drop-shadow-md">Váy ngắn</div>
                        <div class="tw-absolute tw-bottom-4 tw-right-4 tw-bg-white tw-text-black tw-rounded-full tw-p-2 tw-shadow-lg tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity tw-transform tw-translate-y-2 group-hover:tw-translate-y-0">
                            <span class="material-icons-outlined tw-text-sm">arrow_forward</span>
                        </div>
                    </a>
                </div>
            </section>

            <section class="tw-container tw-mx-auto tw-px-4 tw-mb-16">
                <div class="tw-flex tw-flex-col md:tw-flex-row tw-items-center tw-gap-4 tw-mb-8">
                    <h2 class="tw-text-2xl tw-font-bold tw-flex tw-items-center tw-gap-2">
                        <span class="tw-relative tw-flex tw-h-3 tw-w-3">
                          <span class="tw-animate-ping tw-absolute tw-inline-flex tw-h-full tw-w-full tw-rounded-full tw-bg-red-400 tw-opacity-75"></span>
                          <span class="tw-relative tw-inline-flex tw-rounded-full tw-h-3 tw-w-3 tw-bg-red-600"></span>
                        </span>

                        Tulip Sale Upto 36%
                    </h2>

                    <div class="tw-flex tw-gap-2">
                        <div class="tw-bg-primary tw-text-white tw-font-bold tw-px-2 tw-py-1 tw-text-xs tw-rounded tw-min-w-[45px] tw-text-center">
                            <span id="countdown-h">24</span> <span class="tw-text-[8px] tw-font-normal">Giờ</span>
                        </div>
                        <div class="tw-bg-primary tw-text-white tw-font-bold tw-px-2 tw-py-1 tw-text-xs tw-rounded tw-min-w-[45px] tw-text-center">
                            <span id="countdown-m">00</span> <span class="tw-text-[8px] tw-font-normal">Phút</span>
                        </div>
                        <div class="tw-bg-primary tw-text-white tw-font-bold tw-px-2 tw-py-1 tw-text-xs tw-rounded tw-min-w-[45px] tw-text-center">
                            <span id="countdown-s">00</span> <span class="tw-text-[8px] tw-font-normal">Giây</span>
                        </div>
                    </div>

                    <div class="tw-flex-grow"></div>

                    <div class="tw-flex tw-gap-2">
                        <button id="btn-sale-prev" class="tw-p-2 tw-rounded-full tw-border tw-border-gray-200 hover:tw-bg-gray-100 hover:tw-border-black tw-transition">
                            <span class="material-icons-outlined tw-text-sm">west</span>
                        </button>
                        <button id="btn-sale-next" class="tw-p-2 tw-rounded-full tw-border tw-border-gray-200 hover:tw-bg-gray-100 hover:tw-border-black tw-transition">
                            <span class="material-icons-outlined tw-text-sm">east</span>
                        </button>
                    </div>
                </div>

                <div id="sale-slider" class="tw-flex tw-overflow-x-auto tw-pb-4 tw-scroll-smooth tw-snap-x" style="scrollbar-width: none; -ms-overflow-style: none;">

                    <div th:each="p : ${saleProducts}"
                         class="tw-w-[160px] md:tw-w-[240px] tw-flex-shrink-0 tw-mr-4 tw-snap-start tw-group tw-border tw-border-transparent hover:tw-border-gray-200 hover:tw-shadow-lg tw-transition-all tw-duration-300 tw-rounded-lg tw-bg-white">

                        <a th:href="@{'/product/' + ${p.id}}" class="tw-block tw-p-2">
                            <div class="tw-relative tw-overflow-hidden tw-mb-3 tw-rounded-md">
                                <img th:src="${p.thumbnail}" th:alt="${p.name}"
                                     class="tw-w-full tw-h-[200px] md:tw-h-[320px] tw-object-cover tw-object-top group-hover:tw-scale-105 tw-transition-transform tw-duration-500">

                                <span class="tw-absolute tw-top-2 tw-left-2 tw-bg-primary tw-text-white tw-text-[10px] tw-font-bold tw-px-2 tw-py-1 tw-rounded">
                                    -<span th:text="${#numbers.formatDecimal((1.0 * (p.basePrice - p.discountPrice) / p.basePrice) * 100, 0, 0)}"></span>%
                                </span>
                            </div>

                            <h3 class="tw-text-xs tw-text-gray-700 tw-font-medium tw-mb-1 tw-truncate tw-uppercase" th:text="${p.name}">
                                Tên sản phẩm
                            </h3>
                            <div class="tw-flex tw-flex-col md:tw-flex-row md:tw-items-baseline tw-gap-1 md:tw-gap-2">
                                <span class="tw-text-primary tw-font-bold tw-text-sm"
                                      th:text="${#numbers.formatDecimal(p.discountPrice, 0, 'COMMA', 0, 'POINT')} + 'đ'"></span>
                                <span class="tw-text-gray-400 tw-text-[10px] tw-line-through"
                                      th:text="${#numbers.formatDecimal(p.basePrice, 0, 'COMMA', 0, 'POINT')} + 'đ'"></span>
                            </div>
                        </a>
                    </div>

                    <div th:if="${saleProducts == null || saleProducts.isEmpty()}" class="tw-w-full tw-flex tw-justify-center tw-items-center tw-h-[200px] tw-bg-gray-50 tw-text-gray-400 tw-rounded-lg">
                        <p>Hiện chưa có sản phẩm nào giảm giá sâu.</p>
                    </div>
                </div>

                <div class="tw-text-center tw-mt-10">
                    <button style="border-width: 1px;" class="tw-border tw-border-black tw-px-8 tw-py-3 tw-text-xs tw-font-bold tw-uppercase tw-tracking-widest hover:tw-bg-black hover:tw-text-white tw-transition tw-duration-300">
                        Xem tất cả TULIP SALE UPTO 70%
                    </button>
                </div>
            </section>

            <section class="tw-container tw-mx-auto tw-px-4 tw-mb-16">
                <div class="tw-flex tw-flex-col md:tw-flex-row tw-justify-center tw-items-center tw-gap-8 tw-mb-8 tw-border-b tw-border-gray-200 tw-pb-2">

                    <button onclick="loadTab('new', this)" class="tab-btn tw-font-bold tw-text-primary tw-border-b-2 tw-border-primary tw-pb-4 -tw-mb-4 tw-transition-colors">
                        Hàng mới về
                    </button>

                    <button onclick="loadTab('sale', this)" class="tab-btn tw-text-gray-500 hover:tw-text-black tw-pb-4 -tw-mb-4 tw-border-b-2 tw-border-transparent hover:tw-border-gray-300 tw-transition-colors">
                        Sale Upto 18%
                    </button>

                    <button onclick="loadTab('trending', this)" class="tab-btn tw-text-gray-500 hover:tw-text-black tw-pb-4 -tw-mb-4 tw-border-b-2 tw-border-transparent hover:tw-border-gray-300 tw-transition-colors">
                        Đang thịnh hành
                    </button>
                </div>

                <div id="tab-product-grid" class="tw-grid tw-grid-cols-2 md:tw-grid-cols-5 tw-gap-6 tw-min-h-[400px]">
                    <div class="tw-col-span-full tw-text-center tw-py-10 tw-text-gray-400">Đang tải dữ liệu...</div>
                </div>

                <div class="tw-text-center tw-mt-10">
                    <button style="border-width: 1px;" class="tw-border tw-border-black tw-px-8 tw-py-3 tw-text-xs tw-font-bold tw-uppercase tw-tracking-widest hover:tw-bg-black hover:tw-text-white tw-transition tw-duration-300">
                        Xem tất cả
                    </button>
                </div>
            </section>

            <section class="tw-container tw-mx-auto tw-px-4 tw-mb-20">
                <div class="tw-bg-surface-light tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-shadow-lg">
                    <div class="tw-relative tw-h-[400px] md:tw-h-[500px]">
                        <img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?w=1000&fit=crop" class="tw-absolute tw-inset-0 tw-w-full tw-h-full tw-object-cover">
                        <div class="tw-absolute tw-top-4 tw-left-4 tw-text-white tw-text-3xl tw-font-display tw-font-bold">EDE</div>
                        <div class="tw-absolute tw-bottom-10 tw-left-10">
                            <h2 class="tw-text-6xl tw-text-white tw-font-script">Yên</h2>
                            <p class="tw-text-white tw-text-sm tw-tracking-widest tw-mt-2 tw-uppercase">FW'25 Campaign</p>
                        </div>
                    </div>
                    <div class="tw-p-8 md:tw-p-16 tw-flex tw-flex-col tw-justify-center">
                        <h3 class="tw-text-2xl tw-font-bold tw-font-display tw-mb-6">YEN - FW'25 CAMPAIGN</h3>
                        <p class="tw-text-gray-600 tw-text-sm tw-leading-relaxed tw-mb-8 tw-italic">
                            Trong dòng chảy của thời gian, vẻ đẹp truyền thống chưa bao giờ phai nhạt. Nó vẫn hiện hữu, trong tà Áo Dài buông lơi mềm mại... Mỗi thiết kế trong YÊN như một nhịp cầu, đưa ta trở về với cội nguồn văn hóa.
                        </p>
                        <div>
                            <button style="border-width: 1px;" class="tw-border tw-border-black tw-px-8 tw-py-3 tw-text-xs tw-font-bold tw-uppercase tw-tracking-widest hover:tw-bg-black hover:tw-text-white tw-transition tw-duration-300">
                                Xem sản phẩm New Collection
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="tw-container tw-mx-auto tw-px-4 tw-mb-16">
                <div class="tw-flex tw-justify-center tw-gap-8 tw-mb-8 tw-text-sm tw-uppercase tw-tracking-widest">
                    <button onclick="loadOccasion('di-lam', this)" class="occasion-btn tw-font-bold tw-border-b-2 tw-border-black tw-pb-1 tw-transition-colors">
                        Đồ đi làm
                    </button>
                    <button onclick="loadOccasion('di-choi', this)" class="occasion-btn tw-text-gray-500 hover:tw-text-black tw-transition-colors tw-border-b-2 tw-border-transparent hover:tw-border-gray-300">
                        Đồ đi chơi
                    </button>
                    <button onclick="loadOccasion('di-tiec', this)" class="occasion-btn tw-text-gray-500 hover:tw-text-black tw-transition-colors tw-border-b-2 tw-border-transparent hover:tw-border-gray-300">
                        Đồ đi tiệc
                    </button>
                </div>

                <div id="occasion-grid" class="tw-grid tw-grid-cols-2 md:tw-grid-cols-5 tw-gap-6 tw-min-h-[300px]">
                    <div class="tw-col-span-full tw-text-center tw-py-10 tw-text-gray-400">Đang tải...</div>
                </div>

                <div class="tw-text-center tw-mt-10">
                    <button class="!tw-border tw-border-black tw-px-8 tw-py-3 tw-text-xs tw-font-bold tw-uppercase tw-tracking-widest hover:tw-bg-black hover:tw-text-white tw-transition tw-duration-300">
                        Xem tất cả
                    </button>
                </div>
            </section>

            <section class="tw-bg-surface-light tw-py-16">
                <div class="tw-container tw-mx-auto tw-px-4">
                    <h2 class="tw-text-2xl tw-font-bold tw-font-display tw-mb-8">Set đồ nổi bật</h2>

                    <div class="tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-6">

                        <div class="tw-relative tw-w-full tw-h-[600px] tw-group tw-overflow-hidden tw-rounded-lg">
                            <img src="https://cdn.hstatic.net/products/200000000133/25aqae029x_-_25aqqe029x.2_0bb4d97982c34badbd400cccce92ff1d_master.jpg?w=800&fit=crop"
                                 class="tw-w-full tw-h-full tw-object-cover" alt="Set 1">

                            <div class="hotspot-point tw-absolute tw-top-[30%] tw-left-[45%] tw-z-10 tw-cursor-pointer"
                                 onclick="toggleHotspot('set1-p1')">
                                <span class="tw-absolute tw-inline-flex tw-h-full tw-w-full tw-rounded-full tw-bg-white tw-opacity-75 tw-animate-ping"></span>
                                <span class="tw-relative tw-inline-flex tw-rounded-full tw-h-4 tw-w-4 tw-bg-white tw-shadow-md tw-border-2 tw-border-gray-200"></span>
                            </div>
                            <div id="set1-p1" class="hotspot-card tw-hidden tw-absolute tw-top-[30%] tw-left-[50%] tw-ml-2 tw-bg-white/95 tw-backdrop-blur-sm tw-p-3 tw-rounded-lg tw-shadow-xl tw-w-[200px] tw-z-20 tw-animate-fade-in-up">
                                <a href="#" class="tw-flex tw-gap-3 tw-items-center">
                                    <img src="https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=100" class="tw-w-12 tw-h-16 tw-object-cover tw-rounded">
                                    <div><h4 class="tw-text-xs tw-font-bold">Sơ mi tay dài</h4><p class="tw-text-xs tw-text-primary tw-font-bold">1,199,000đ</p></div>
                                </a>
                                <button onclick="event.stopPropagation(); closeHotspot('set1-p1')" class="tw-absolute -tw-top-2 -tw-right-2 tw-bg-black tw-text-white tw-rounded-full tw-w-5 tw-h-5 tw-text-[10px]">✕</button>
                            </div>

                            <div class="hotspot-point tw-absolute tw-top-[70%] tw-left-[40%] tw-z-10 tw-cursor-pointer"
                                 onclick="toggleHotspot('set1-p2')">
                                <span class="tw-absolute tw-inline-flex tw-h-full tw-w-full tw-rounded-full tw-bg-white tw-opacity-75 tw-animate-ping"></span>
                                <span class="tw-relative tw-inline-flex tw-rounded-full tw-h-4 tw-w-4 tw-bg-white tw-shadow-md"></span>
                            </div>
                            <div id="set1-p2" class="hotspot-card tw-hidden tw-absolute tw-top-[60%] tw-left-[45%] tw-ml-2 tw-bg-white/95 tw-backdrop-blur-sm tw-p-3 tw-rounded-lg tw-shadow-xl tw-w-[200px] tw-z-20 tw-animate-fade-in-up">
                                <a href="#" class="tw-flex tw-gap-3 tw-items-center">
                                    <img src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=100" class="tw-w-12 tw-h-16 tw-object-cover tw-rounded">
                                    <div><h4 class="tw-text-xs tw-font-bold">Quần ống suông</h4><p class="tw-text-xs tw-text-primary tw-font-bold">899,000đ</p></div>
                                </a>
                                <button onclick="event.stopPropagation(); closeHotspot('set1-p2')" class="tw-absolute -tw-top-2 -tw-right-2 tw-bg-black tw-text-white tw-rounded-full tw-w-5 tw-h-5 tw-text-[10px]">✕</button>
                            </div>
                        </div>

                        <div class="tw-relative tw-w-full tw-h-[600px] tw-group tw-overflow-hidden tw-rounded-lg">
                            <img src="https://cdn.hstatic.net/products/200000000133/25asme036x_-_25avje008n_-_25akqe012f.5_c1a41fab1e73468daae7195199ff4d37_master.jpg?w=800&fit=crop"
                                 class="tw-w-full tw-h-full tw-object-cover" alt="Set 2">

                            <div class="hotspot-point tw-absolute tw-top-[25%] tw-left-[55%] tw-z-10 tw-cursor-pointer"
                                 onclick="toggleHotspot('set2-p1')">
                                <span class="tw-absolute tw-inline-flex tw-h-full tw-w-full tw-rounded-full tw-bg-white tw-opacity-75 tw-animate-ping"></span>
                                <span class="tw-relative tw-inline-flex tw-rounded-full tw-h-4 tw-w-4 tw-bg-white tw-shadow-md"></span>
                            </div>
                            <div id="set2-p1" class="hotspot-card tw-hidden tw-absolute tw-top-[25%] tw-right-[50%] tw-mr-4 tw-bg-white/95 tw-backdrop-blur-sm tw-p-3 tw-rounded-lg tw-shadow-xl tw-w-[200px] tw-z-20 tw-animate-fade-in-up">
                                <a href="#" class="tw-flex tw-gap-3 tw-items-center">
                                    <img src="https://images.unsplash.com/photo-1548624149-f321f471dc5f?w=100" class="tw-w-12 tw-h-16 tw-object-cover tw-rounded">
                                    <div><h4 class="tw-text-xs tw-font-bold">Áo khoác dạ</h4><p class="tw-text-xs tw-text-primary tw-font-bold">2,499,000đ</p></div>
                                </a>
                                <button onclick="event.stopPropagation(); closeHotspot('set2-p1')" class="tw-absolute -tw-top-2 -tw-right-2 tw-bg-black tw-text-white tw-rounded-full tw-w-5 tw-h-5 tw-text-[10px]">✕</button>
                            </div>

                            <div class="hotspot-point tw-absolute tw-top-[50%] tw-left-[30%] tw-z-10 tw-cursor-pointer"
                                 onclick="toggleHotspot('set2-p2')">
                                <span class="tw-absolute tw-inline-flex tw-h-full tw-w-full tw-rounded-full tw-bg-white tw-opacity-75 tw-animate-ping"></span>
                                <span class="tw-relative tw-inline-flex tw-rounded-full tw-h-4 tw-w-4 tw-bg-white tw-shadow-md"></span>
                            </div>
                            <div id="set2-p2" class="hotspot-card tw-hidden tw-absolute tw-top-[40%] tw-left-[35%] tw-bg-white/95 tw-backdrop-blur-sm tw-p-3 tw-rounded-lg tw-shadow-xl tw-w-[200px] tw-z-20 tw-animate-fade-in-up">
                                <a href="#" class="tw-flex tw-gap-3 tw-items-center">
                                    <img src="https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=100" class="tw-w-12 tw-h-16 tw-object-cover tw-rounded">
                                    <div><h4 class="tw-text-xs tw-font-bold">Túi xách da</h4><p class="tw-text-xs tw-text-primary tw-font-bold">1,500,000đ</p></div>
                                </a>
                                <button onclick="event.stopPropagation(); closeHotspot('set2-p2')" class="tw-absolute -tw-top-2 -tw-right-2 tw-bg-black tw-text-white tw-rounded-full tw-w-5 tw-h-5 tw-text-[10px]">✕</button>
                            </div>
                        </div>

                        <div class="tw-relative tw-w-full tw-h-[600px] tw-group tw-overflow-hidden tw-rounded-lg">
                            <img src="https://cdn.hstatic.net/products/200000000133/25avae033k_-_25avje033k.4_ce3e2fa25d8a4ef6ab674ca8793fdce0_master.jpg?w=800&fit=crop"
                                 class="tw-w-full tw-h-full tw-object-cover" alt="Set 3">

                            <div class="hotspot-point tw-absolute tw-top-[40%] tw-left-[50%] tw-z-10 tw-cursor-pointer"
                                 onclick="toggleHotspot('set3-p1')">
                                <span class="tw-absolute tw-inline-flex tw-h-full tw-w-full tw-rounded-full tw-bg-white tw-opacity-75 tw-animate-ping"></span>
                                <span class="tw-relative tw-inline-flex tw-rounded-full tw-h-4 tw-w-4 tw-bg-white tw-shadow-md"></span>
                            </div>
                            <div id="set3-p1" class="hotspot-card tw-hidden tw-absolute tw-top-[40%] tw-right-[55%] tw-mr-2 tw-bg-white/95 tw-backdrop-blur-sm tw-p-3 tw-rounded-lg tw-shadow-xl tw-w-[200px] tw-z-20 tw-animate-fade-in-up">
                                <a href="#" class="tw-flex tw-gap-3 tw-items-center">
                                    <img src="https://cdn.hstatic.net/products/200000000133/25avae033k_-_25avje033k.3_8bb08dbcf6e34c8dbffeae454acb6ec3_master.jpg?w=100" class="tw-w-12 tw-h-16 tw-object-cover tw-rounded">
                                    <div><h4 class="tw-text-xs tw-font-bold">Đầm dự tiệc</h4><p class="tw-text-xs tw-text-primary tw-font-bold">3,200,000đ</p></div>
                                </a>
                                <button onclick="event.stopPropagation(); closeHotspot('set3-p1')" class="tw-absolute -tw-top-2 -tw-right-2 tw-bg-black tw-text-white tw-rounded-full tw-w-5 tw-h-5 tw-text-[10px]">✕</button>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <section class="tw-container tw-mx-auto tw-px-4 tw-py-16">
                <div class="tw-flex tw-justify-between tw-items-center tw-mb-6">
                    <h2 class="tw-text-2xl tw-font-bold tw-font-display">Bài viết mới nhất</h2>
                    <div class="tw-flex tw-gap-2">
                        <button class="tw-p-1 tw-rounded-full hover:tw-bg-gray-100"><span class="material-icons-outlined">west</span></button>
                        <button class="tw-p-1 tw-rounded-full hover:tw-bg-gray-100"><span class="material-icons-outlined">east</span></button>
                    </div>
                </div>
                <div class="tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 md:tw-grid-cols-4 tw-gap-6">
                    <div class="tw-flex tw-flex-col">
                        <div class="tw-relative tw-mb-4">
                            <img src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&fit=crop" class="tw-w-full tw-aspect-[4/5] tw-object-cover">
                            <div class="tw-absolute tw-top-2 tw-left-2 tw-text-white tw-font-display tw-text-lg tw-font-bold">EDE</div>
                        </div>
                        <h3 class="tw-font-bold tw-text-sm tw-mb-2 tw-uppercase">FESTIVE AURA | FESTIVE'23 COLLECTION</h3>
                        <p class="tw-text-xs tw-text-gray-500 tw-mb-2 tw-line-clamp-2">FESTIVE AURA - nơi phong thái kiêu hãnh và vẻ đẹp sang trọng của người phụ nữ...</p>
                        <div class="tw-flex tw-justify-between tw-text-[10px] tw-text-gray-400 tw-uppercase tw-font-bold">
                            <span>01 Tháng 12, 2023</span>
                            <a class="hover:tw-text-black" href="#">Xem thêm +</a>
                        </div>
                    </div>
                    <div class="tw-flex tw-flex-col">
                        <div class="tw-relative tw-mb-4">
                            <img src="https://images.unsplash.com/photo-1509631179647-0177331693ae?w=400&fit=crop" class="tw-w-full tw-aspect-[4/5] tw-object-cover">
                            <div class="tw-absolute tw-top-2 tw-left-2 tw-text-white tw-font-display tw-text-lg tw-font-bold">EDE</div>
                        </div>
                        <h3 class="tw-font-bold tw-text-sm tw-mb-2 tw-uppercase">EVALUTION | NEW COLLECTION</h3>
                        <p class="tw-text-xs tw-text-gray-500 tw-mb-2 tw-line-clamp-2">Khi bước vào giai đoạn trưởng thành, người phụ nữ không tìm cách chứng minh...</p>
                        <div class="tw-flex tw-justify-between tw-text-[10px] tw-text-gray-400 tw-uppercase tw-font-bold">
                            <span>24 Tháng 11, 2023</span>
                            <a class="hover:tw-text-black" href="#">Xem thêm +</a>
                        </div>
                    </div>
                    <div class="tw-flex tw-flex-col">
                        <div class="tw-relative tw-mb-4">
                            <img src="https://images.unsplash.com/photo-1500917293891-ef795e70e1f6?w=400&fit=crop" class="tw-w-full tw-aspect-[4/5] tw-object-cover">
                            <div class="tw-absolute tw-top-2 tw-left-2 tw-text-white tw-font-display tw-text-lg tw-font-bold">EDE</div>
                        </div>
                        <h3 class="tw-font-bold tw-text-sm tw-mb-2 tw-uppercase">FW'23 CAMPAIGN</h3>
                        <p class="tw-text-xs tw-text-gray-500 tw-mb-2 tw-line-clamp-2">Bình yên không phải một điểm dừng, cũng chẳng phải một nơi để trú ngụ tạm thời...</p>
                        <div class="tw-flex tw-justify-between tw-text-[10px] tw-text-gray-400 tw-uppercase tw-font-bold">
                            <span>08 Tháng 10, 2023</span>
                            <a class="hover:tw-text-black" href="#">Xem thêm +</a>
                        </div>
                    </div>
                    <div class="tw-flex tw-flex-col">
                        <div class="tw-relative tw-mb-4">
                            <img src="https://images.unsplash.com/photo-1549570434-99dc75956742?w=400&fit=crop" class="tw-w-full tw-aspect-[4/5] tw-object-cover">
                            <div class="tw-absolute tw-top-2 tw-left-2 tw-text-white tw-font-display tw-text-lg tw-font-bold">EDE</div>
                        </div>
                        <h3 class="tw-font-bold tw-text-sm tw-mb-2 tw-uppercase">SHADES OF OFFICE LADY</h3>
                        <p class="tw-text-xs tw-text-gray-500 tw-mb-2 tw-line-clamp-2">Một bức chân dung mới của quý cô công sở hiện đại được Eva de Eva vẽ nên qua...</p>
                        <div class="tw-flex tw-justify-between tw-text-[10px] tw-text-gray-400 tw-uppercase tw-font-bold">
                            <span>29 Tháng 09, 2023</span>
                            <a class="hover:tw-text-black" href="#">Xem thêm +</a>
                        </div>
                    </div>
                </div>
            </section>

            <section class="tw-border-t tw-border-b tw-border-gray-100 tw-py-8 tw-bg-surface-light">
                <div class="tw-container tw-mx-auto tw-px-4 tw-grid tw-grid-cols-2 md:tw-grid-cols-4 tw-gap-8">
                    <div class="tw-flex tw-gap-4 tw-items-center">
                        <span class="material-icons-outlined tw-text-4xl tw-text-gray-400">local_shipping</span>
                        <div>
                            <h4 class="tw-font-bold tw-text-sm">Miễn phí vận chuyển</h4>
                            <p class="tw-text-[10px] tw-text-gray-500">Miễn phí đơn hàng từ 1.999.000đ</p>
                        </div>
                    </div>
                    <div class="tw-flex tw-gap-4 tw-items-center">
                        <span class="material-icons-outlined tw-text-4xl tw-text-gray-400">sync_alt</span>
                        <div>
                            <h4 class="tw-font-bold tw-text-sm">Giao mới thu hồi</h4>
                            <p class="tw-text-[10px] tw-text-gray-500">Đổi tận nơi không cần gửi hàng</p>
                        </div>
                    </div>
                    <div class="tw-flex tw-gap-4 tw-items-center">
                        <span class="material-icons-outlined tw-text-4xl tw-text-gray-400">support_agent</span>
                        <div>
                            <h4 class="tw-font-bold tw-text-sm">Tổng Đài Miễn Phí</h4>
                            <p class="tw-text-[10px] tw-text-gray-500">Gọi <b>1800.3636</b> để tư vấn</p>
                        </div>
                    </div>
                    <div class="tw-flex tw-gap-4 tw-items-center">
                        <span class="material-icons-outlined tw-text-4xl tw-text-gray-400">credit_card</span>
                        <div>
                            <h4 class="tw-font-bold tw-text-sm">Thanh toán đa dạng</h4>
                            <p class="tw-text-[10px] tw-text-gray-500">Phương thức thanh toán linh hoạt</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="tw-container tw-mx-auto tw-px-4 tw-py-16">
                <h2 class="tw-text-center tw-font-bold tw-mb-8">Follow Us On Media</h2>
                <div class="tw-flex tw-flex-col tw-items-center tw-mb-10">
                    <div class="tw-text-3xl tw-font-display tw-font-bold tw-tracking-widest tw-mb-6">TULIP DE TOUR</div>
                    <div class="tw-relative tw-w-full tw-max-w-xl">
                        <input class="tw-w-full tw-border tw-border-gray-300 tw-py-3 tw-px-4 tw-rounded-none focus:tw-ring-0 focus:tw-border-black" placeholder="Tìm kiếm sản phẩm..." type="text"/>
                        <button class="tw-absolute tw-right-4 tw-top-1/2 tw-transform tw--translate-y-1/2 tw-text-gray-400 hover:tw-text-black">
                            <span class="material-icons-outlined">search</span>
                        </button>
                    </div>
                    <div class="tw-mt-4 tw-text-xs tw-text-gray-500 tw-text-center">
                        <span class="tw-font-bold">Gợi ý cho bạn:</span>
                        <a class="hover:tw-underline" href="#">Đầm</a>, <a class="hover:tw-underline" href="#">Áo</a>, <a class="hover:tw-underline" href="#">Chân váy</a>, <a class="hover:tw-underline" href="#">Quần</a>, <a class="hover:tw-underline" href="#">Jumpsuit</a>, <a class="hover:tw-underline" href="#">Homewear</a>
                    </div>
                </div>
                <div class="tw-grid tw-grid-cols-2 md:tw-grid-cols-4 tw-gap-0">
                    <div class="tw-relative tw-aspect-square tw-group tw-cursor-pointer">
                        <img class="tw-w-full tw-h-full tw-object-cover" src="https://res.cloudinary.com/diawi4gde/image/upload/v1765814444/588959880_18412753378138488_2435953181868879088_n_djgunt.jpg?w=500&fit=crop">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/40 tw-flex tw-flex-col tw-items-center tw-justify-center tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity">
                            <i class="fab fa-facebook tw-text-white tw-text-3xl tw-mb-2"></i>
                            <span class="tw-text-white tw-text-sm tw-font-bold">TulipOfficial</span>
                        </div>
                    </div>
                    <div class="tw-relative tw-aspect-square tw-group tw-cursor-pointer">
                        <img class="tw-w-full tw-h-full tw-object-cover" src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=500&fit=crop">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/40 tw-flex tw-flex-col tw-items-center tw-justify-center tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity">
                            <i class="fab fa-youtube tw-text-white tw-text-3xl tw-mb-2"></i>
                            <span class="tw-text-white tw-text-sm tw-font-bold">Cre by VinhSaGex</span>
                        </div>
                    </div>
                    <div class="tw-relative tw-aspect-square tw-group tw-cursor-pointer">
                        <img class="tw-w-full tw-h-full tw-object-cover" src="https://res.cloudinary.com/diawi4gde/image/upload/v1765814444/584865369_18411250240138488_4063880610566949751_n_ivau01.jpg?w=500&fit=crop">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/40 tw-flex tw-flex-col tw-items-center tw-justify-center tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity">
                            <i class="fab fa-tiktok tw-text-white tw-text-3xl tw-mb-2"></i>
                            <span class="tw-text-white tw-text-sm tw-font-bold">TulipOfficial</span>
                        </div>
                    </div>
                    <div class="tw-relative tw-aspect-square tw-group tw-cursor-pointer">
                        <img class="tw-w-full tw-h-full tw-object-cover" src="https://images.unsplash.com/photo-1529139574466-a302d2053990?w=500&fit=crop">
                        <div class="tw-absolute tw-inset-0 tw-bg-black/40 tw-flex tw-flex-col tw-items-center tw-justify-center tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity">
                            <i class="fab fa-instagram tw-text-white tw-text-3xl tw-mb-2"></i>
                            <span class="tw-text-white tw-text-sm tw-font-bold">VinhVVN dep trai</span>
                        </div>
                    </div>
                </div>
            </section>

        </div>

    </main>



    <footer th:replace="~{fragments/home/footer :: footer}"></footer>

    <!-- JavaScript -->
    <script th:src="@{/js/supply-script.js}"></script>
    
    <!-- Three.js 3D Viewer (ES Module) -->
    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        function init3DViewers() {
            const canvasContainers = document.querySelectorAll('.canvas-container');
            
            if (canvasContainers.length === 0) return;

            // Array to store all viewer instances for cleanup
            const viewerInstances = [];

            canvasContainers.forEach((container, index) => {
                // Extract configuration from data attributes
                const modelSrc = container.dataset.modelSrc;
                const modelScale = parseFloat(container.dataset.modelScale) || 2.0; // Default scale
                const modelY = parseFloat(container.dataset.modelY) || 0; // Default Y offset

                if (!modelSrc) {
                    console.warn(`No model path specified for container ${index + 1}`);
                    return;
                }

                // Create isolated Three.js scene for this container
                const scene = new THREE.Scene();
                scene.background = null; // Transparent background

                // Camera setup
                const camera = new THREE.PerspectiveCamera(
                    50, // FOV
                    container.clientWidth / container.clientHeight,
                    0.1,
                    1000
                );
                camera.position.set(0, 0, 5);

                // Renderer setup
                const renderer = new THREE.WebGLRenderer({
                    alpha: true, // Transparent background
                    antialias: true
                });
                renderer.setSize(container.clientWidth, container.clientHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                container.appendChild(renderer.domElement);

                // Lighting
                const ambientLight = new THREE.AmbientLight(0xffffff, 1);
                scene.add(ambientLight);

                const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
                directionalLight.position.set(5, 5, 5);
                scene.add(directionalLight);

                // Controls
                const controls = new OrbitControls(camera, renderer.domElement);
                controls.enableRotate = true;
                controls.enableZoom = false;
                controls.enablePan = false;
                controls.autoRotate = true;
                controls.autoRotateSpeed = 1.0;
                controls.minDistance = 3;
                controls.maxDistance = 10;

                // Load model with custom configuration
                const loader = new GLTFLoader();
                loader.load(
                    modelSrc,
                    (gltf) => {
                        const model = gltf.scene;
                        scene.add(model);

                        // Center and scale model using custom configuration
                        const box = new THREE.Box3().setFromObject(model);
                        const center = box.getCenter(new THREE.Vector3());
                        const size = box.getSize(new THREE.Vector3());
                        
                        // Use custom scale from data attribute
                        const maxDim = Math.max(size.x, size.y, size.z);
                        const calculatedScale = modelScale / maxDim;
                        model.scale.multiplyScalar(calculatedScale);
                        
                        // Position model with custom Y offset
                        model.position.x = -center.x * calculatedScale;
                        model.position.y = -center.y * calculatedScale + modelY; // Apply custom Y offset
                        model.position.z = -center.z * calculatedScale;

                        // Animation loop
                        let animationId;
                        function animate() {
                            animationId = requestAnimationFrame(animate);
                            controls.update();
                            renderer.render(scene, camera);
                        }
                        animate();

                        // Store animation ID for cleanup
                        container._animationId = animationId;
                    },
                    (progress) => {
                        // Loading progress
                        if (progress.lengthComputable) {
                            console.log(`Container ${index + 1} - Loading model:`, (progress.loaded / progress.total * 100).toFixed(0) + '%');
                        }
                    },
                    (error) => {
                        console.error(`Error loading 3D model for container ${index + 1}:`, error);
                        // Fallback: show error message
                        container.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666; font-family: monospace; text-align: center; padding: 20px;">3D Model Loading Error<br><small>Please check the model path</small></div>';
                    }
                );

                // Handle resize for this specific container
                function handleResize() {
                    const width = container.clientWidth;
                    const height = container.clientHeight;
                    
                    if (width > 0 && height > 0) {
                        camera.aspect = width / height;
                        camera.updateProjectionMatrix();
                        renderer.setSize(width, height);
                    }
                }

                // Use ResizeObserver for better performance
                const resizeObserver = new ResizeObserver(handleResize);
                resizeObserver.observe(container);

                // Store references for cleanup and management
                const viewerInstance = {
                    container: container,
                    scene: scene,
                    renderer: renderer,
                    camera: camera,
                    controls: controls,
                    resizeObserver: resizeObserver,
                    dispose: function() {
                        // Cancel animation
                        if (this.container._animationId) {
                            cancelAnimationFrame(this.container._animationId);
                        }
                        // Dispose of Three.js resources
                        this.scene.traverse((object) => {
                            if (object.geometry) object.geometry.dispose();
                            if (object.material) {
                                if (Array.isArray(object.material)) {
                                    object.material.forEach(material => material.dispose());
                                } else {
                                    object.material.dispose();
                                }
                            }
                        });
                        this.renderer.dispose();
                        this.controls.dispose();
                        this.resizeObserver.disconnect();
                        // Clear container
                        if (this.container.contains(this.renderer.domElement)) {
                            this.container.removeChild(this.renderer.domElement);
                        }
                    }
                };

                container._threeScene = scene;
                container._threeRenderer = renderer;
                container._threeCamera = camera;
                container._threeControls = controls;
                container._viewerInstance = viewerInstance;

                viewerInstances.push(viewerInstance);
            });

            // Store all instances globally for potential cleanup
            window._threeViewerInstances = viewerInstances;

            console.log(`Initialized ${viewerInstances.length} 3D viewer(s)`);
        }

        // Initialize 3D viewers when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init3DViewers);
        } else {
            // Small delay to ensure other scripts have initialized
            setTimeout(init3DViewers, 100);
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.getElementById('sale-slider');
            const prevBtn = document.getElementById('btn-sale-prev');
            const nextBtn = document.getElementById('btn-sale-next');

            if (slider && prevBtn && nextBtn) {
                nextBtn.addEventListener('click', () => {
                    // Cuộn sang phải 1 khoảng bằng chiều rộng thẻ + gap
                    const cardWidth = slider.querySelector('div').offsetWidth;
                    slider.scrollBy({ left: cardWidth + 24, behavior: 'smooth' });
                });

                prevBtn.addEventListener('click', () => {
                    const cardWidth = slider.querySelector('div').offsetWidth;
                    slider.scrollBy({ left: -(cardWidth + 24), behavior: 'smooth' });
                });
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            // --- Xử lý cho Slider Danh mục nổi bật ---
            const catSlider = document.getElementById('category-slider');
            const catPrevBtn = document.getElementById('btn-cat-prev');
            const catNextBtn = document.getElementById('btn-cat-next');

            if (catSlider && catPrevBtn && catNextBtn) {
                catNextBtn.addEventListener('click', () => {
                    // Lấy chiều rộng thẻ đầu tiên + margin (để cuộn chính xác 1 thẻ)
                    const firstCard = catSlider.querySelector('div');
                    const scrollAmount = firstCard ? firstCard.offsetWidth + 16 : 300; // 16 là margin-right
                    catSlider.scrollBy({ left: scrollAmount, behavior: 'smooth' });
                });

                catPrevBtn.addEventListener('click', () => {
                    const firstCard = catSlider.querySelector('div');
                    const scrollAmount = firstCard ? firstCard.offsetWidth + 16 : 300;
                    catSlider.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
                });
            }
        });

        // Hàm load dữ liệu theo tab
        function loadTab(type, btnElement) {
            const grid = document.getElementById('tab-product-grid');

            // 1. Cập nhật giao diện nút (Active State)
            // Reset tất cả nút về màu xám
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.className = 'tab-btn tw-text-gray-500 hover:tw-text-black tw-pb-4 -tw-mb-4 tw-border-b-2 tw-border-transparent hover:tw-border-gray-300 tw-transition-colors';
            });
            // Set nút đang bấm thành màu đỏ (Active)
            if(btnElement) {
                btnElement.className = 'tab-btn tw-font-bold tw-text-primary tw-border-b-2 tw-border-primary tw-pb-4 -tw-mb-4 tw-transition-colors';
            }

            // 2. Hiển thị loading
            grid.innerHTML = '<div class="tw-col-span-full tw-flex tw-justify-center tw-items-center tw-h-40"><div class="tw-animate-spin tw-rounded-full tw-h-8 tw-w-8 tw-border-b-2 tw-border-primary"></div></div>';

            // 3. Chọn API tương ứng
            let apiUrl = '/api/store/new-arrivals';
            if (type === 'sale') apiUrl = '/api/store/sale-18';
            if (type === 'trending') apiUrl = '/api/store/trending';

            // 4. Gọi API
            fetch(apiUrl)
                .then(res => res.json())
                .then(products => {
                    grid.innerHTML = ''; // Xóa loading

                    if (!products || products.length === 0) {
                        grid.innerHTML = '<div class="tw-col-span-full tw-text-center tw-text-gray-400">Không có sản phẩm nào.</div>';
                        return;
                    }

                    // 5. Render HTML
                    products.forEach(p => {
                        const price = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(p.price);
                        let oldPriceHtml = '';
                        let badgeHtml = '';

                        if (p.originalPrice && p.originalPrice > p.price) {
                            const oldPrice = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(p.originalPrice);
                            oldPriceHtml = `<span class="tw-text-gray-400 tw-text-xs tw-line-through">${oldPrice}</span>`;
                            // Tính % giảm
                            const percent = Math.round(((p.originalPrice - p.price) / p.originalPrice) * 100);
                            if (percent > 0) {
                                badgeHtml = `<span class="tw-absolute tw-top-2 tw-left-2 tw-bg-yellow-600 tw-text-white tw-text-[10px] tw-font-bold tw-px-2 tw-py-1">-${percent}%</span>`;
                            }
                        } else if (type === 'new') {
                            // Badge NEW cho tab Hàng mới
                            badgeHtml = `<span class="tw-absolute tw-top-2 tw-left-2 tw-bg-blue-600 tw-text-white tw-text-[10px] tw-font-bold tw-px-2 tw-py-1">NEW</span>`;
                        }

                        const itemHtml = `
                                    <div class="tw-group">
                                        <a href="${p.url}" class="tw-block">
                                            <div class="tw-relative tw-overflow-hidden tw-mb-3">
                                                <img src="${p.thumbnail}" alt="${p.name}"
                                                     class="tw-w-full tw-aspect-[3/4] tw-object-cover tw-object-top tw-transition-transform tw-duration-700 group-hover:tw-scale-105">
                                                ${badgeHtml}
                                            </div>
                                            <h3 class="tw-text-xs tw-text-gray-500 tw-mb-1 tw-truncate tw-uppercase">${p.name}</h3>
                                            <div class="tw-flex tw-items-baseline tw-gap-2">
                                                <span class="tw-text-black tw-font-bold tw-text-sm">${price}</span>
                                                ${oldPriceHtml}
                                            </div>
                                        </a>
                                    </div>
                                `;
                        grid.insertAdjacentHTML('beforeend', itemHtml);
                    });
                })
                .catch(err => {
                    console.error(err);
                    grid.innerHTML = '<div class="tw-col-span-full tw-text-center tw-text-red-500">Lỗi tải dữ liệu.</div>';
                });
        }

        // Tự động load tab đầu tiên (Hàng mới về) khi trang tải xong
        document.addEventListener('DOMContentLoaded', () => {
            // Tìm nút đầu tiên để active style
            const firstBtn = document.querySelector('.tab-btn');
            loadTab('new', firstBtn);
        });

        function toggleHotspot(cardId) {
            // 1. Đóng tất cả các thẻ đang mở trước
            document.querySelectorAll('.hotspot-card').forEach(card => {
                if (card.id !== cardId) {
                    card.classList.add('tw-hidden');
                }
            });

            // 2. Bật/Tắt thẻ được chọn
            const card = document.getElementById(cardId);
            if (card) {
                // Nếu đang ẩn thì hiện, đang hiện thì ẩn
                if (card.classList.contains('tw-hidden')) {
                    card.classList.remove('tw-hidden');
                } else {
                    card.classList.add('tw-hidden');
                }
            }
        }

        function closeHotspot(cardId) {
            const card = document.getElementById(cardId);
            if (card) {
                card.classList.add('tw-hidden');
            }
        }

        // Click ra ngoài thì đóng hết popup
        document.addEventListener('click', function(event) {
            const isClickInsideHotspot = event.target.closest('.hotspot-point');
            const isClickInsideCard = event.target.closest('.hotspot-card');

            if (!isClickInsideHotspot && !isClickInsideCard) {
                document.querySelectorAll('.hotspot-card').forEach(card => {
                    card.classList.add('tw-hidden');
                });
            }
        });

        function loadOccasion(tag, btnElement) {
            const grid = document.getElementById('occasion-grid');

            // 1. Update Active State cho nút
            document.querySelectorAll('.occasion-btn').forEach(btn => {
                btn.className = 'occasion-btn tw-text-gray-500 hover:tw-text-black tw-transition-colors tw-border-b-2 tw-border-transparent hover:tw-border-gray-300';
            });
            if(btnElement) {
                btnElement.className = 'occasion-btn tw-font-bold tw-text-black tw-border-b-2 tw-border-black tw-pb-1 tw-transition-colors';
            }

            // 2. Hiển thị Loading
            grid.innerHTML = '<div class="tw-col-span-full tw-flex tw-justify-center tw-py-10"><div class="tw-animate-spin tw-rounded-full tw-h-8 tw-w-8 tw-border-b-2 tw-border-gray-900"></div></div>';

            // 3. Gọi API
            fetch(`/api/store/occasion?tag=${tag}`)
                .then(res => res.json())
                .then(products => {
                    grid.innerHTML = '';

                    if (!products || products.length === 0) {
                        grid.innerHTML = '<div class="tw-col-span-full tw-text-center tw-text-gray-400">Chưa có sản phẩm cho mục này.</div>';
                        return;
                    }

                    // 4. Render HTML
                    products.forEach(p => {
                        const price = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(p.price);

                        const html = `
                                    <div class="tw-group">
                                        <div class="tw-relative tw-overflow-hidden tw-mb-3">
                                            <a href="${p.url}">
                                                <img src="${p.thumbnail}" alt="${p.name}"
                                                     class="tw-w-full tw-aspect-[3/4] tw-object-cover tw-object-top tw-transition-transform tw-duration-500 group-hover:tw-scale-105">
                                            </a>
                                        </div>
                                        <h3 class="tw-text-xs tw-text-gray-500 tw-mb-1 tw-truncate tw-uppercase">${p.name}</h3>
                                        <div class="tw-flex tw-items-baseline tw-gap-2">
                                            <span class="tw-text-black tw-font-bold tw-text-sm">${price}</span>
                                        </div>
                                    </div>
                                `;
                        grid.insertAdjacentHTML('beforeend', html);
                    });
                })
                .catch(err => {
                    console.error(err);
                    grid.innerHTML = '<div class="tw-col-span-full tw-text-center tw-text-red-500">Lỗi kết nối server.</div>';
                });
        }

        // Tự động load tab đầu tiên khi vào trang
        document.addEventListener('DOMContentLoaded', () => {
            const firstBtn = document.querySelector('.occasion-btn');
            loadOccasion('di-lam', firstBtn);
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Cấu hình thời gian đếm ngược (tính bằng giây)
            // 24 giờ = 24 * 60 * 60 = 86400 giây
            const CYCLE_SECONDS = 24 * 60 * 60;

            // Key để lưu trữ thời gian bắt đầu vào LocalStorage (để khi F5 không bị reset về 24h từ đầu)
            // Nếu bạn muốn mỗi lần F5 đều reset về 24h thì xóa phần localStorage đi.
            const STORAGE_KEY = 'ede_sale_countdown_start';

            function getRemainingTime() {
                let startTime = localStorage.getItem(STORAGE_KEY);
                const now = Math.floor(Date.now() / 1000); // Thời gian hiện tại (giây)

                if (!startTime) {
                    // Nếu chưa có (người dùng mới vào), set thời gian bắt đầu là NOW
                    startTime = now;
                    localStorage.setItem(STORAGE_KEY, startTime);
                }

                // Tính thời gian đã trôi qua
                const elapsed = now - parseInt(startTime);

                // Tính thời gian còn lại trong chu kỳ
                let remaining = CYCLE_SECONDS - (elapsed % CYCLE_SECONDS);

                return remaining;
            }

            const elH = document.getElementById('countdown-h');
            const elM = document.getElementById('countdown-m');
            const elS = document.getElementById('countdown-s');

            function updateTimer() {
                let time = getRemainingTime();

                // Chuyển đổi giây thành H:M:S
                let h = Math.floor(time / 3600);
                let m = Math.floor((time % 3600) / 60);
                let s = Math.floor(time % 60);

                // Thêm số 0 đằng trước nếu nhỏ hơn 10
                if (elH) elH.innerText = h < 10 ? '0' + h : h;
                if (elM) elM.innerText = m < 10 ? '0' + m : m;
                if (elS) elS.innerText = s < 10 ? '0' + s : s;
            }

            // Chạy ngay lập tức
            updateTimer();
            // Cập nhật mỗi giây
            setInterval(updateTimer, 1000);
        });

    </script>
</body>
</html>

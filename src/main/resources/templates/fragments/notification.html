<div th:fragment="notification" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <!-- Load CSS -->
    <link rel="stylesheet" th:href="@{/css/notification.css}">
    <link rel="stylesheet" th:href="@{/css/notification-bell.css}">
    
    <div sec:authorize="isAuthenticated()" class="notification-widget-container">
        <button class="notification-bell-btn" id="notificationBellBtn" type="button" aria-label="Thông báo">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <span class="notification-dot" id="notificationCountBadge" style="display: none;"></span>
        </button>
        
        <div class="notification-panel" id="notificationPanel">
            
            <div class="panel-fixed-top">
                <div class="notification-panel-header">
                    <div class="header-title">
                        <h5>Thông báo</h5>
                        <span class="header-count" id="headerCount" style="display: none;">0</span>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn" id="markAllReadBtn" title="Đánh dấu tất cả đã đọc">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
                        </button>
                    </div>
                </div>
                
                <div class="notification-tabs">
                    <button class="tab-btn active" data-tab="all" data-type="">Tất cả</button>
                    <button class="tab-btn" data-tab="order" data-type="ORDER">Đơn hàng</button>
                    <button class="tab-btn" data-tab="promotion" data-type="PROMOTION">Ưu đãi</button>
                    <button class="tab-btn" data-tab="system" data-type="SYSTEM">Tin tức</button>
                </div>
            </div>
            
            <div class="notification-content-wrapper">
                <div class="notification-tab-content active" data-tab="all">
                    <div class="notification-list" id="allNotificationList">
                        <div class="notification-loading"><span class="spinner"></span></div>
                    </div>
                </div>
                <div class="notification-tab-content" data-tab="order"><div class="notification-list" id="orderNotificationList"></div></div>
                <div class="notification-tab-content" data-tab="promotion"><div class="notification-list" id="promotionNotificationList"></div></div>
                <div class="notification-tab-content" data-tab="system"><div class="notification-list" id="systemNotificationList"></div></div>
            </div>
            
            <div class="notification-footer">
                <a href="/notifications" class="view-all-link">Xem tất cả lịch sử</a>
            </div>
        </div>
    </div>
    
    <div id="notificationToastContainer" class="notification-toast-container"></div>
    
    <!-- Load External JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    <script th:src="@{/js/notification.js}"></script>
</div>